---
import type { ComponentProps } from 'astro/types';

import AccessionsDownloadButton from './AccessionsDownloadButton.astro';
import DataPageLayout from './DataPageLayout.astro';
import { getLapisUrl } from '../../config';
import type { OrganismConstants } from '../../views/OrganismConstants';
import { type View } from '../../views/View';
import type { PageStateHandler } from '../../views/pageStateHandlers/PageStateHandler';

interface Props {
    view: View<object, OrganismConstants, PageStateHandler<object>>;
    downloadLinks: ComponentProps<typeof AccessionsDownloadButton>['downloadLinks'];
}

const { view, downloadLinks } = Astro.props;
---

<DataPageLayout
    title={view.viewTitle}
    breadcrumbs={view.viewBreadcrumbEntries}
    downloadLinks={downloadLinks}
    dataOrigins={view.organismConstants.dataOrigins}
    lapisUrl={getLapisUrl(view.organismConstants.organism)}
    accessionDownloadFields={view.organismConstants.accessionDownloadFields}
>
    <gs-app
        lapis={getLapisUrl(view.organismConstants.organism)}
        mutationAnnotations={JSON.stringify(view.organismConstants.mutationAnnotations)}
    >
        <slot />
    </gs-app>
</DataPageLayout>
