---
import type {
    LapisFilter,
    NamedLapisFilter,
    PrevalenceOverTimeView,
    TemporalGranularity,
} from '@genspectrum/dashboard-components/util';

import { defaultTablePageSize } from '../../views/View';
import ComponentWrapper from '../ComponentWrapper.astro';

interface Props {
    numeratorFilters: NamedLapisFilter[];
    denominatorFilter: LapisFilter;
    lapisDateField: string;
    granularity: TemporalGranularity;
    views?: PrevalenceOverTimeView[];
    height?: string;
    pageSize?: number;
}

const {
    numeratorFilters,
    denominatorFilter,
    lapisDateField,
    granularity,
    views = ['bar', 'line', 'bubble', 'table'],
    height,
    pageSize,
} = Astro.props;
---

<ComponentWrapper title='Prevalence over time' height={height}>
    <gs-prevalence-over-time
        numeratorFilters={JSON.stringify(numeratorFilters)}
        denominatorFilter={JSON.stringify(denominatorFilter)}
        lapisDateField={lapisDateField}
        granularity={granularity}
        smoothingWindow='0'
        pageSize={pageSize ?? defaultTablePageSize}
        views={JSON.stringify(views)}
        width='100%'
        height={height ? '100%' : undefined}></gs-prevalence-over-time>
</ComponentWrapper>
