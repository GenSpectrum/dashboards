---
import type { LapisFilter, SequenceType } from '@genspectrum/dashboard-components/util';

import ComponentHeadline from '../ComponentHeadline.astro';
import ComponentWrapper from '../ComponentWrapper.astro';

interface Props {
    title: string;
    lapisFilter: LapisFilter;
    sequenceType: SequenceType;
    collapsible?: boolean;
    linkPrefix?: string;
}

const { title, lapisFilter, sequenceType, collapsible = false, linkPrefix } = Astro.props;
---

{
    collapsible ? (
        <details>
            <summary class='cursor-pointer font-bold'>
                <ComponentHeadline title={title} linkPrefix={linkPrefix} />
            </summary>
            <gs-wastewater-mutations-over-time
                lapisFilter={JSON.stringify(lapisFilter)}
                sequenceType={sequenceType}
                width='100%'
                height='100%'
                maxNumberOfGridRows='700'
            >
                <span slot='infoText'>
                    <slot name='infoText' />
                </span>
            </gs-wastewater-mutations-over-time>
        </details>
    ) : (
        <ComponentWrapper title={title} linkPrefix={linkPrefix}>
            <gs-wastewater-mutations-over-time
                lapisFilter={JSON.stringify(lapisFilter)}
                sequenceType={sequenceType}
                width='100%'
                height='100%'
                maxNumberOfGridRows='700'
            >
                <span slot='infoText'>
                    <slot name='infoText' />
                </span>
            </gs-wastewater-mutations-over-time>
        </ComponentWrapper>
    )
}
