---
import { getSession } from 'auth-astro/server';

import NotLoggedIn from '../../components/auth/NotLoggedIn.astro';
import { SubscriptionsCreate } from '../../components/subscriptions/create/SubscriptionsCreate';
import { getDashboardsConfig } from '../../config';
import BaseLayout from '../../layouts/base/BaseLayout.astro';

const session = await getSession(Astro.request);

const config = getDashboardsConfig();
---

<BaseLayout title='Create new subscription' omitHeaderNavigation>
    {
        session?.user?.id !== undefined ? (
            <SubscriptionsCreate config={config} client:only='react' userId={session.user.id} />
        ) : (
            <NotLoggedIn />
        )
    }
</BaseLayout>
