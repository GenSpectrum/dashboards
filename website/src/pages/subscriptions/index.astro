---
import { buildSubscriptions } from '../../components/subscriptions/backendApi';
import { getFilters, getSelectedFilters } from '../../components/subscriptions/overview/SubscriptionFilter';
import BaseLayout from '../../layouts/base/BaseLayout.astro';
import { Subscriptions } from '../../components/subscriptions/overview/Subscriptions';

const subscriptions = buildSubscriptions();

const filters = getFilters(subscriptions);
const selectedFilters = getSelectedFilters(filters, Astro.url.searchParams.getAll('organism'));
---

<BaseLayout title='Subscriptions' omitHeaderNavigation={true}>
    <Subscriptions client:load filters={selectedFilters} subscriptions={subscriptions} />
</BaseLayout>
