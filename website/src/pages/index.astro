---
import BaseLayout from '../layouts/base/BaseLayout.astro';
import DataInfo from '../layouts/base/footer/DataInfo.astro';
import { organismConfig } from '../types/Organism';
import { dataOrigins } from '../types/dataOrigins';
import { Page } from '../types/pages';
import { ServerSide } from '../views/serverSideRouting';

/* eslint-disable @typescript-eslint/naming-convention */
const iconMapping: { [key: string]: string } = {
    'Sequencing efforts': 'mdi--test-tube',
    'Single variant': 'mdi--magnify',
    'Compare side-by-side': 'mdi--compare-horizontal',
};
/* eslint-enable */

// Gen<span class='text-purple-500 font-medium'>S</span> /* #a855f7 */
// <span class='text-blue-500 font-medium'>p</span> /* #3b82f6 */
// <span class='text-sky-500 font-medium'>e</span> /* #0ea5e9 */
// <span class='text-teal-500 font-medium'>c</span> /* #14b8a6 */
// <span class='text-green-500 font-medium'>t</span> /* #22c55e */
// <span class='text-lime-500 font-medium'>r</span> /* #84cc16 */
// <span class='text-yellow-500 font-medium'>u</span> /* #eab308 */
// <span class='text-orange-500 font-medium'>m</span> /* #f97316 */
---

<style>
    a {
        @apply text-slate-500 hover:underline;
    }

    .items a {
        @apply text-black hover:underline hover:decoration-4;
    }
    h1 {
        @apply text-center font-light;
    }

    @media (max-width: 768px) {
        .largerLogo img {
            display: none;
        }

        .largerLogo div {
            @apply mx-auto;
        }
        .largerLogo h1 {
            @apply text-6xl text-center;
        }

        .largerLogo h2 {
            @apply text-center text-2xl;
        }

        .infoSection h1 {
            @apply text-2xl;
        }
    }

</style>

<BaseLayout title='GenSpectrum Dashboards'>
    <div class='largerLogo my-10 flex items-center justify-center'>
        <img src='/virus-outline-colorful-anya.svg' alt='colorful-logo' width='200' height='200' />
        <div class='ml-10'>
            <h1 class='mb-4 text-7xl'>
                Gen<span class='text-purple-500 font-medium'>S</span>
                <span class='text-blue-500 font-medium'>p</span>
                <span class='text-sky-500 font-medium'>e</span>
                <span class='text-teal-500 font-medium'>c</span>
                <span class='text-green-500 font-medium'>t</span>
                <span class='text-lime-500 font-medium'>r</span>
                <span class='text-yellow-500 font-medium'>u</span>
                <span class='text-orange-500 font-medium'>m</span>
            </h1>
            <h2 class='text-end text-3xl font-light text-slate-600'>Inspect pathogen genomic data</h2>
        </div>
    </div>

    <div class='infoSection mx-auto my-12 flex max-w-[1200px] px-8'>
        <div class='ml-8 basis-1/2 text-balance'>
            <div class='items-left my-8 flex'>
                <div class='iconify size-7 mdi--information-outline'></div>
                <h1 class='ml-2 text-3xl text-slate-600'>About Us</h1>
            </div>
            <span
                >An interactive platform to help scientists and public health professionals query and analyze pathogen
                sequences. The core team is at the <a href='https://bsse.ethz.ch/cevo'>cEVO group </a> at ETH Zurich, but
                we are grateful for our many <a
                    href='https://github.com/GenSpectrum/cov-spectrum-website?tab=readme-ov-file#contributors-'
                >
                    contributors
                </a> from around the globe. We are funded by the <a href='https://ethz.ch/en.html'>ETH Zurich</a> and the
                <a href='https://www.cdc.gov/'>CDC</a>.
            </span>
        </div>
        <div class='ml-8 basis-1/2 text-balance'>
            <div class='items-left my-8 flex'>
                <div class='iconify size-7 mdi--wrench-outline'></div>
                <h1 class='ml-2 text-3xl text-slate-600'>Open Source Tooling</h1>
            </div>
            <span
                >Code is available on <a href='https://github.com/GenSpectrum'>GitHub</a>, with customizable components
                to build your own dashboards. We use data from the <a href='https://www.insdc.org/'
                    >International Nucleotide Sequence Database Collaboration (INSDC)</a
                >
                and <a href='https://pathoplexus.org/'>Pathoplexus</a>, read more about our data processing <a
                    href={Page.dataSources}>here</a
                >.
            </span>
        </div>
    </div>

    <div class='mx-auto mb-8 mt-8 flex max-w-[1200px] items-center justify-center'>
        <div class='iconify size-7 mdi--virus-outline'></div>
        <h1 class='ml-2 text-3xl text-slate-600'>Pathogens</h1>
    </div>
    <div class='items mx-auto mb-8 flex max-w-[1200px] flex-wrap justify-center gap-x-4 gap-y-8'>
        {
            Object.values(organismConfig).map((organism) => (
                <div class='group w-[260px]'>
                    <div class={`${organism.borderEntryDecoration} rounded-md border-2 border-gray-100`}>
                        <h3 class={`rounded-t-md p-4 text-xl ${organism.backgroundColor} ${organism.backgroundColorFocus}`}>
                            {organism.label}
                        </h3>
                        <ul class='mb-4 ml-6 mr-6'>
                            {Object.values(ServerSide.routing.views[organism.organism]).map((view) => (
                                <li class='flex items-start pt-2'>
                                    <div
                                        class={`iconify mr-2 size-7 w-4 pt-[0.8rem] ${iconMapping[view.label] || 'mdi--virus-outline'}`}
                                    />
                                    <a class={`${organism.menuListEntryDecoration}`} href={view.getDefaultPageState()}>{view.labelLong}</a>
                                </li>
                            ))}
                            {organism.organism === 'covid' && (
                                <li class='flex items-start pt-4'>
                                    <div class='iconify mr-2 size-7 w-4 pt-[0.8rem] mdi--virus-outline' />
                                    <a
                                        href='https://cov-spectrum.org'
                                        class={`flex items-center after:iconify after:ml-0.5 after:mdi--external-link ${organism.menuListEntryDecoration}`}
                                    >
                                        CoV-Spectrum
                                    </a>
                                </li>
                            )}
                        </ul>
                    </div>
                </div>
            ))
        }
    </div>

    <DataInfo slot='secondary-footer' dataOrigins={[dataOrigins.insdc, dataOrigins.pathoplexus]} />
</BaseLayout>
